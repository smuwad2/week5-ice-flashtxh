<!DOCTYPE html>
<html>

<head>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <div class="bg-light text-center p-5 mb-4">
        <h2>Choose an option:</h2>
        <label for="limit">Limit:</label>
        <input id="limit" type="number" min=1 max=5 value=1>
        <select onchange="getData()" id="type">
            <option value="customers">Customers</option>
            <option value="products">Products</option>
            <option value="suppliers">Suppliers</option>
        </select>

    </div>
    <div id="result">

    </div>
    <script>
        function getData() {
            const type = document.getElementById('type').value;
            const limit = document.getElementById('limit').value;
            axios.get('/data', {
                params: {
                    "type": type,
                    "limit": limit
                }
            }).then(response => {
                const records = response.data.records;

                if (!records || records.length === 0) {
                    document.getElementById('result').innerHTML = '<p>No data found.</p>';
                    return;
                }

                function generateTable(records) {
                    let table = '<table class="table table-bordered"><tbody><tr>';
                    table = `<h2>${type}</h2>` + table;
                    Object.keys(records[0]).forEach(key => {
                        table += `<th>${key}</th>`;
                    });
                    table += '</tr>';

                    records.forEach(record => {
                        table += '<tr>';
                        Object.values(record).forEach(val => {
                            table += `<td>${val}</td>`;
                        });
                        table += '</tr>';
                    });
                    table += '</tbody></table>';
                    return table
                }

                document.getElementById('result').innerHTML = generateTable(records);
            }).catch(error => {
                document.getElementById('result').innerHTML = '<p>Error loading data.</p>';
            });
        }

    </script>
</body>

</html>
